<%- include('partials/header', { title: restaurant['Restaurant Name'] + ' - Menu' }) %>
<%- include('partials/_flash') %>

<div class="min-h-screen bg-gray-50 px-4 sm:px-8 py-10">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800"><%= restaurant['Restaurant Name'] %></h1>
    <p class="text-gray-600 text-lg"><%= restaurant.Location %></p>
  </div>

  <div class="bg-white rounded-lg shadow overflow-hidden">
    <ul class="divide-y divide-gray-200">
      <% restaurant.menu.forEach(item => { %>
        <li class="px-4 py-4 sm:px-6 flex justify-between items-center">
          <div>
            <p class="text-lg font-medium text-gray-900"><%= item.name %></p>
            <p class="text-sm text-orange-600 font-semibold">Rs. <%= item.price %></p>
          </div>
           <div class="flex justify-between items-center border-b py-3">
    
    <form action="/cart/add" method="POST" class="flex items-center gap-2">
      <input type="hidden" name="restaurantId" value="<%= restaurant._id %>">
      <input type="hidden" name="foodname" value="<%= item.name %>">
      <input type="hidden" name="itemPrice" value="<%= item.price %>">
      <button type="submit" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
        Add
      </button>
    </form>
  </div>
        </li>
      <% }) %>
    </ul>
  </div>
</div>
<h2 class="text-xl font-bold mt-6 mb-4">Customer Reviews</h2>

<% if (reviews.length === 0) { %>
  <p class="text-gray-600 italic">No reviews yet.</p>
<% } else { %>
  <div class="space-y-4">
    <% reviews.forEach(r => { %>
      <div class="bg-gray-100 p-4 rounded">
        <p class="text-gray-800 font-medium"><%= r.user_email %></p>
        <p class="text-gray-700 mt-1"><%= r.review %></p>
        <p class="text-sm text-green-600 mt-1">Sentiment: <%= r.sentiment_score.toFixed(2) %></p>
      </div>
    <% }) %>
  </div>
<% } %>

<%- include('partials/footer') %>
