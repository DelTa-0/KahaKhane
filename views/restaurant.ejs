<%- include('partials/header') %>
<%- include('partials/_flash') %>

<!-- âœ… Search Form -->
<div class="flex justify-center mb-4">
  <form action="/restaurant/details/<%= restaurant._id %>" method="GET" 
        class="flex items-center gap-2 w-full sm:w-1/2">
    <input 
      type="text" 
      name="search" 
      placeholder="Search menu..." 
      value="<%= searchTerm %>" 
      class="border rounded p-2 flex-1"
    />
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
      Search
    </button>
  </form>
</div>


<div class="min-h-screen bg-gray-50 px-4 sm:px-8 py-10">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800"><%= restaurant.name %></h1>
    <p class="text-gray-600 text-lg"><%= restaurant.address %></p>
  </div>

  <div class="bg-white rounded-lg shadow overflow-hidden">
    <ul class="divide-y divide-gray-200">
      <% restaurant.menu.forEach(item => { %>
        <li 
          class="px-4 py-4 sm:px-6 flex justify-between items-center 
          <% if (searchTerm && item.name.toLowerCase().includes(searchTerm.toLowerCase())) { %>
            bg-yellow-100
          <% } %>">
          
          <div>
            <p class="text-lg font-medium text-gray-900"><%= item.name %></p>
            <p class="text-sm text-orange-600 font-semibold">Rs. <%= item.price %></p>
          </div>

          <div class="flex justify-between items-center">
            <form action="/cart/add" method="POST" class="flex items-center gap-2">
              <input type="hidden" name="restaurantId" value="<%= restaurant._id %>">
              <input type="hidden" name="foodname" value="<%= item.name %>">
              <input type="hidden" name="itemPrice" value="<%= item.price %>">
              <button type="submit" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
                Add
              </button>
            </form>
          </div>
        </li>
      <% }) %>
    </ul>
  </div>
</div>

<%- include('partials/footer') %>
